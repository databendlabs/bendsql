"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[77],{6077:function(e,t,r){r.r(t),r.d(t,{default:function(){return k}});var l=r(2676),s=r(5271),o=r(9822),a=r(9675),n=r(2327),d=r(987),i=r(9619),c=r(5122);function x(e){if(!e)return"";let t=e instanceof Date?e:new Date(e);if(isNaN(t.getTime()))return"";let r=Date.now()-t.getTime();return r<6e4?"just now":r<36e5?"".concat(Math.floor(r/6e4),"m ago"):r<864e5?"".concat(Math.floor(r/36e5),"h ago"):r<6048e5?"".concat(Math.floor(r/864e5),"d ago"):t.toLocaleDateString()}let u=e=>(0,l.jsx)("svg",{viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",...e,children:(0,l.jsx)("path",{d:"M7 5v10l7-5-7-5z",fill:"currentColor",stroke:"none"})}),g=e=>(0,l.jsx)("svg",{viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",...e,children:(0,l.jsx)("path",{d:"M6 8l4 4 4-4",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"})}),p=e=>(0,l.jsx)("svg",{viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",...e,children:(0,l.jsx)("path",{d:"M6 12l4-4 4 4",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"})}),h=e=>(0,l.jsxs)("svg",{viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",...e,children:[(0,l.jsx)("rect",{x:"4",y:"4",width:"5",height:"12",rx:"1.5"}),(0,l.jsx)("rect",{x:"11",y:"4",width:"5",height:"12",rx:"1.5"})]}),m=e=>(0,l.jsxs)("svg",{viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",...e,children:[(0,l.jsx)("path",{d:"M7 6 4 10l3 4",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"}),(0,l.jsx)("path",{d:"m13 6 3 4-3 4",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"})]}),b=e=>(0,l.jsxs)("svg",{viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",...e,children:[(0,l.jsx)("circle",{cx:"7",cy:"6",r:"1"}),(0,l.jsx)("circle",{cx:"13",cy:"6",r:"1"}),(0,l.jsx)("circle",{cx:"7",cy:"10",r:"1"}),(0,l.jsx)("circle",{cx:"13",cy:"10",r:"1"}),(0,l.jsx)("circle",{cx:"7",cy:"14",r:"1"}),(0,l.jsx)("circle",{cx:"13",cy:"14",r:"1"})]}),f=e=>(0,l.jsxs)("svg",{viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",...e,children:[(0,l.jsx)("path",{d:"M8 4H4v4",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"}),(0,l.jsx)("path",{d:"M12 4h4v4",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"}),(0,l.jsx)("path",{d:"M8 16H4v-4",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"}),(0,l.jsx)("path",{d:"M12 16h4v-4",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"})]}),y=e=>(0,l.jsxs)("svg",{viewBox:"0 0 20 20",fill:"currentColor",stroke:"none",...e,children:[(0,l.jsx)("circle",{cx:"5",cy:"10",r:"1.5"}),(0,l.jsx)("circle",{cx:"10",cy:"10",r:"1.5"}),(0,l.jsx)("circle",{cx:"15",cy:"10",r:"1.5"})]});var j=e=>{var t,r;let{cell:o,index:j,isActive:v,canDelete:N,onSqlChange:w,onExecute:k,onDelete:C,onSelect:D,onToggleCollapse:S,onToggleEditor:E,onToggleResult:A,onMoveUp:L,onMoveDown:M,dragState:F,onDragStart:R,onDragEnd:q,onDragOver:B,onDrop:J}=e,[z,T]=(0,s.useState)(!1),P=(0,s.useRef)(null);(0,s.useEffect)(()=>{if(!z)return;let e=e=>{P.current&&!P.current.contains(e.target)&&T(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[z]);let W=!o.hideEditor&&!o.collapsed,I=!o.hideResult&&!o.collapsed,O=(0,s.useMemo)(()=>o.loading?"Running query":o.lastExecutedAt?"Ran ".concat(x(o.lastExecutedAt)):"Ready to run",[o.loading,o.lastExecutedAt]),_=["flex","gap-4","rounded-2xl","border","bg-white","shadow-sm","transition-all",F.isDragOver?"ring-2 ring-indigo-300 border-indigo-300":"border-gray-200",v?"shadow-[0_0_0_2px_rgba(99,102,241,0.15)]":"hover:border-gray-300"].join(" ");return(0,l.jsxs)("div",{className:_,onClick:D,onDragOver:e=>{e.preventDefault(),B()},onDrop:e=>{e.preventDefault(),J()},children:[(0,l.jsxs)("div",{className:"flex flex-col items-center gap-3 border-r border-gray-100 px-2 py-4",children:[(0,l.jsx)("div",{className:"cursor-grab rounded-full border bg-white p-2 text-gray-400 hover:text-gray-600 ".concat(F.isDragging?"border-indigo-300 text-indigo-500 cursor-grabbing":"border-gray-200"),draggable:!0,onDragStart:e=>{e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/plain",o.id),R()},onDragEnd:e=>{e.preventDefault(),q()},children:(0,l.jsx)(b,{className:"h-4 w-4"})}),(0,l.jsxs)("div",{className:"flex flex-col gap-1 text-gray-400",children:[(0,l.jsx)("button",{type:"button",onClick:e=>{e.stopPropagation(),S()},className:"rounded-md border px-1.5 py-1 text-xs ".concat(o.collapsed?"border-indigo-300 text-indigo-500":"border-gray-200 hover:text-gray-600"),title:o.collapsed?"Expand cell":"Collapse cell",children:o.collapsed?(0,l.jsx)(g,{className:"h-3 w-3"}):(0,l.jsx)(p,{className:"h-3 w-3"})}),(0,l.jsx)("button",{type:"button",onClick:e=>{e.stopPropagation(),E()},className:"rounded-md border px-1.5 py-1 text-xs ".concat(o.hideEditor?"border-indigo-300 text-indigo-500":"border-gray-200 hover:text-gray-600"),title:o.hideEditor?"Show SQL editor":"Collapse SQL editor",children:(0,l.jsx)(m,{className:"h-3.5 w-3.5"})}),(0,l.jsx)("button",{type:"button",onClick:e=>{e.stopPropagation(),A()},className:"rounded-md border px-1.5 py-1 text-xs ".concat(o.hideResult?"border-indigo-300 text-indigo-500":"border-gray-200 hover:text-gray-600"),title:o.hideResult?"Show results":"Collapse results",children:(0,l.jsx)(h,{className:"h-3.5 w-3.5"})})]})]}),(0,l.jsxs)("div",{className:"flex-1 px-4 py-4",draggable:!1,children:[(0,l.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsxs)("button",{type:"button",onClick:e=>{e.stopPropagation(),k()},disabled:o.loading||!o.sql.trim(),className:"inline-flex items-center rounded-full border px-3 py-1 text-sm font-semibold ".concat(o.loading||!o.sql.trim()?"border-gray-200 text-gray-400 cursor-not-allowed":"border-indigo-200 text-indigo-600 hover:bg-indigo-50"),children:[(0,l.jsx)(u,{className:"mr-1 h-3.5 w-3.5"}),"Run"]}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("p",{className:"text-sm font-semibold text-gray-900",children:["Cell ",j+1]}),(0,l.jsx)("p",{className:"text-xs text-gray-500",children:O})]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("button",{type:"button",onClick:e=>{e.stopPropagation(),D()},className:"rounded-full border border-gray-200 p-1.5 text-gray-400 hover:border-gray-300 hover:text-gray-600",title:"Expand cell",children:(0,l.jsx)(f,{className:"h-4 w-4"})}),(0,l.jsxs)("div",{className:"relative",ref:P,children:[(0,l.jsx)("button",{type:"button",onClick:e=>{e.stopPropagation(),T(e=>!e)},className:"rounded-full border border-gray-200 p-1.5 text-gray-400 hover:border-gray-300 hover:text-gray-600",title:"Cell options",children:(0,l.jsx)(y,{className:"h-4 w-4"})}),z&&(0,l.jsxs)("div",{className:"absolute right-0 mt-2 w-40 rounded-xl border border-gray-200 bg-white shadow-lg z-10",children:[(0,l.jsxs)("button",{className:"flex w-full items-center justify-between px-3 py-2 text-sm text-gray-700 hover:bg-gray-50",onClick:e=>{e.stopPropagation(),L(),T(!1)},children:["Move cell up",(0,l.jsx)("span",{className:"text-xs text-gray-400",children:"⌘↑"})]}),(0,l.jsxs)("button",{className:"flex w-full items-center justify-between px-3 py-2 text-sm text-gray-700 hover:bg-gray-50",onClick:e=>{e.stopPropagation(),M(),T(!1)},children:["Move cell down",(0,l.jsx)("span",{className:"text-xs text-gray-400",children:"⌘↓"})]}),N&&(0,l.jsx)("button",{className:"flex w-full items-center justify-between px-3 py-2 text-sm text-red-600 hover:bg-red-50",onClick:e=>{e.stopPropagation(),C(),T(!1)},children:"Delete"})]})]})]})]}),!o.collapsed&&(0,l.jsxs)("div",{className:"mt-4 space-y-4",onClick:D,children:[W?(0,l.jsx)("div",{className:"rounded-2xl border border-gray-200 bg-gray-50 focus-within:border-indigo-300",children:(0,l.jsx)(a.ZP,{value:o.sql,placeholder:"Type SQL here...",theme:c.tR,height:"220px",extensions:[c.MH,d.tk.lineWrapping,(0,i.ys)({icons:!1}),(0,n.i6)()],basicSetup:{lineNumbers:!0,foldGutter:!1,indentOnInput:!1,autocompletion:!0,highlightActiveLine:!1},onChange:w,editable:!o.loading,onFocus:D,style:{fontSize:"14px",height:"220px"}})}):(0,l.jsx)("button",{type:"button",className:"w-full rounded-xl border border-dashed border-gray-300 px-3 py-2 text-left text-sm text-gray-500 hover:border-indigo-300",onClick:e=>{e.stopPropagation(),E()},children:"SQL editor collapsed – tap to expand"}),o.error&&I&&(0,l.jsx)("div",{className:"rounded-2xl border border-red-200 bg-red-50 p-4 text-sm text-red-700",children:o.error}),!o.error&&I&&o.result&&(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsxs)("div",{className:"text-xs font-semibold uppercase tracking-wide text-gray-400",children:[o.result.rowCount," row",1===o.result.rowCount?"":"s"," returned in ",o.result.duration]}),(t=o.result).data&&0!==t.data.length?(0,l.jsx)("div",{className:"rounded-xl border border-gray-200 overflow-hidden",children:(0,l.jsx)("div",{className:"overflow-auto max-h-80",children:(0,l.jsxs)("table",{className:"min-w-full text-sm",children:[(0,l.jsx)("thead",{className:"bg-gray-50",children:(0,l.jsx)("tr",{children:t.columns.map((e,r)=>(0,l.jsxs)("th",{className:"px-4 py-3 text-left font-semibold text-gray-700",children:[(0,l.jsx)("div",{children:e}),t.types&&t.types[r]&&(0,l.jsx)("div",{className:"text-xs text-gray-400",children:t.types[r]})]},e+r))})}),(0,l.jsx)("tbody",{children:t.data.map((e,t)=>(0,l.jsx)("tr",{className:t%2==0?"bg-white":"bg-gray-50",children:e.map((e,t)=>(0,l.jsx)("td",{className:"px-4 py-2 text-gray-800 font-mono text-xs",children:e},t))},t))})]})})}):(0,l.jsx)("div",{className:"rounded-xl border border-gray-200 bg-gray-50 p-4 text-center text-sm text-gray-500",children:"No data returned"}),(r=o.result).types&&0!==r.types.length?(0,l.jsxs)("div",{className:"rounded-xl border border-dashed border-gray-200 p-4",children:[(0,l.jsx)("p",{className:"text-xs font-semibold uppercase tracking-wide text-gray-400 mb-2",children:"Column types"}),(0,l.jsx)("div",{className:"space-y-1",children:r.columns.map((e,t)=>(0,l.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,l.jsx)("span",{className:"text-gray-700",children:e}),(0,l.jsx)("span",{className:"font-mono text-xs text-gray-500",children:r.types[t]})]},e+t))})]}):(0,l.jsx)("div",{className:"rounded-xl border border-dashed border-gray-200 p-4 text-sm text-gray-500",children:"No type information available"})]}),!o.error&&I&&!o.result&&(0,l.jsx)("div",{className:"rounded-2xl border border-dashed border-gray-200 p-4 text-sm text-gray-500",children:"Execute the query to see results and schema details."}),!I&&(0,l.jsx)("button",{type:"button",className:"w-full rounded-xl border border-dashed border-gray-300 px-3 py-2 text-left text-sm text-gray-500 hover:border-indigo-300",onClick:e=>{e.stopPropagation(),A()},children:"Result set hidden – tap to expand"})]})]})]})};let v="bendsql-notebooks",N={getNotebooks(){try{let e=localStorage.getItem(v);if(e){let t=JSON.parse(e);return{notebooks:t.notebooks.map(e=>({...e,createdAt:new Date(e.createdAt),updatedAt:new Date(e.updatedAt),cells:e.cells.map(e=>{var t,r,l;return{...e,collapsed:null!==(t=e.collapsed)&&void 0!==t&&t,hideEditor:null!==(r=e.hideEditor)&&void 0!==r&&r,hideResult:null!==(l=e.hideResult)&&void 0!==l&&l,lastExecutedAt:e.lastExecutedAt?new Date(e.lastExecutedAt):void 0}})})),currentNotebookId:t.currentNotebookId}}}catch(e){console.error("Failed to load notebooks from storage:",e)}return{notebooks:[]}},saveNotebooks(e){try{localStorage.setItem(v,JSON.stringify(e))}catch(e){console.error("Failed to save notebooks to storage:",e)}},createNotebook(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Untitled Notebook",t=new Date;return{id:w(),name:e,cells:[{id:w(),sql:"",loading:!1,collapsed:!1,hideEditor:!1,hideResult:!1}],createdAt:t,updatedAt:t}},createCell:()=>({id:w(),sql:"",loading:!1,collapsed:!1,hideEditor:!1,hideResult:!1})};function w(){return Date.now().toString(36)+Math.random().toString(36).substr(2)}var k=()=>{var e,t,r;let[a,n]=(0,s.useState)([]),[d,i]=(0,s.useState)(null),[c,u]=(0,s.useState)(null),[g,p]=(0,s.useState)(""),[h,m]=(0,s.useState)(""),[b,f]=(0,s.useState)(null),[y,v]=(0,s.useState)(null),[w,k]=(0,s.useState)(!1);(0,s.useEffect)(()=>{let e=N.getNotebooks();n(e.notebooks);let t=e.notebooks[0];if(e.currentNotebookId){let r=e.notebooks.find(t=>t.id===e.currentNotebookId);r&&(t=r)}if(t){var r,l;i(t),u(null!==(l=null===(r=t.cells[0])||void 0===r?void 0:r.id)&&void 0!==l?l:null)}},[]),(0,s.useEffect)(()=>{a.length>0&&N.saveNotebooks({notebooks:a,currentNotebookId:null==d?void 0:d.id})},[a,d]),(0,s.useEffect)(()=>{if(!d){u(null);return}if(!d.cells.some(e=>e.id===c)){var e,t;u(null!==(t=null===(e=d.cells[0])||void 0===e?void 0:e.id)&&void 0!==t?t:null)}},[d,c]),(0,s.useEffect)(()=>{m("")},[c]);let C=(0,s.useMemo)(()=>{if(!g.trim())return a;let e=g.toLowerCase();return a.filter(t=>t.name.toLowerCase().includes(e))},[a,g]),D=(null==d?void 0:d.cells.find(e=>e.id===c))||null,S=null==D?void 0:D.result,E=(0,s.useMemo)(()=>{if(!S)return[];if(!h.trim())return S.data;let e=h.toLowerCase();return S.data.filter(t=>t.some(t=>String(null!=t?t:"").toLowerCase().includes(e)))},[S,h]),A=(0,s.useCallback)(()=>{var e,t;let r=N.createNotebook();n(e=>[...e,r]),i(r),u(null!==(t=null===(e=r.cells[0])||void 0===e?void 0:e.id)&&void 0!==t?t:null)},[]),L=(0,s.useCallback)(e=>{var t,r;let l=a.find(t=>t.id===e);l&&(i(l),u(null!==(r=null===(t=l.cells[0])||void 0===t?void 0:t.id)&&void 0!==r?r:null))},[a]),M=(0,s.useCallback)((e,t)=>{n(r=>r.map(r=>r.id===e?{...r,name:t,updatedAt:new Date}:r)),(null==d?void 0:d.id)===e&&i(e=>e?{...e,name:t,updatedAt:new Date}:null)},[d]),F=(0,s.useCallback)(()=>{if(!d)return;let e=N.createCell(),t={...d,cells:[...d.cells,e],updatedAt:new Date};u(e.id),i(t),n(e=>e.map(e=>e.id===t.id?t:e))},[d]),R=(0,s.useCallback)((e,t)=>{if(!d)return;let r={...d,cells:d.cells.map(r=>r.id===e?{...r,sql:t}:r),updatedAt:new Date};i(r),n(e=>e.map(e=>e.id===r.id?r:e))},[d]),q=(0,s.useCallback)((e,t)=>{if(!d)return;let r={...d,cells:d.cells.map(r=>r.id===e?{...r,[t]:!r[t]}:r),updatedAt:new Date};i(r),n(e=>e.map(e=>e.id===r.id?r:e))},[d]),B=(0,s.useCallback)(function(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!d||e===t)return;let l=[...d.cells],s=l.findIndex(t=>t.id===e);if(-1===s)return;let[o]=l.splice(s,1),a=l.findIndex(e=>e.id===t);if(-1===a){l.splice(s,0,o);return}l.splice(r?a+1:a,0,o);let c={...d,cells:l,updatedAt:new Date};i(c),n(e=>e.map(e=>e.id===c.id?c:e)),u(o.id)},[d]),J=(0,s.useCallback)((e,t)=>{if(!d)return;let r=d.cells,l=r.findIndex(t=>t.id===e);if(-1===l)return;let s="up"===t?l-1:l+1;s<0||s>=r.length||B(e,r[s].id,"down"===t)},[d,B]),z=(0,s.useCallback)(e=>{f(e),v(null),k(!1)},[]),T=(0,s.useCallback)(()=>{f(null),v(null),k(!1)},[]),P=(0,s.useCallback)(e=>{b&&b!==e&&(v(e),k(!1))},[b]),W=(0,s.useCallback)(e=>{b&&b!==e&&B(b,e),f(null),v(null),k(!1)},[b,B]),I=(0,s.useCallback)(()=>{if(!d||!b)return;let e=d.cells[d.cells.length-1];if(!e||e.id===b){T();return}B(b,e.id,!0),f(null),v(null),k(!1)},[d,b,B,T]),O=(0,s.useCallback)(async e=>{if(!d)return;let t=d.cells.find(t=>t.id===e);if(t&&t.sql.trim()){u(e),i({...d,cells:d.cells.map(t=>t.id===e?{...t,loading:!0,error:void 0}:t)});try{let r=await fetch("/api/query",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sql:t.sql,kind:0})});if(!r.ok){let e="HTTP error! status: ".concat(r.status);try{let t=await r.json();t.error&&(e=t.error)}catch(e){}throw Error(e)}let l=(await r.json()).results||[],s=l.length>0?l[l.length-1]:void 0,o={...d,cells:d.cells.map(t=>t.id===e?{...t,loading:!1,result:s,error:void 0,lastExecutedAt:new Date}:t),updatedAt:new Date};i(o),n(e=>e.map(e=>e.id===o.id?o:e))}catch(l){console.error("Cell execution failed:",l);let t=l.message.replace(/\\n/g,"\n"),r={...d,cells:d.cells.map(r=>r.id===e?{...r,loading:!1,error:"Query execution failed: "+t,result:void 0}:r),updatedAt:new Date};i(r),n(e=>e.map(e=>e.id===r.id?r:e))}}},[d]),_=(0,s.useCallback)(e=>{if(!d||d.cells.length<=1)return;let t=d.cells.findIndex(t=>t.id===e),r=d.cells[t+1]||d.cells[t-1],l={...d,cells:d.cells.filter(t=>t.id!==e),updatedAt:new Date};u(t=>{var l;return t===e?null!==(l=null==r?void 0:r.id)&&void 0!==l?l:null:t}),i(l),n(e=>e.map(e=>e.id===l.id?l:e))},[d]),H=null!==(t=null!==(e=null==S?void 0:S.rowCount)&&void 0!==e?e:null==S?void 0:S.data.length)&&void 0!==t?t:0,Q=null!==(r=null==S?void 0:S.columns.length)&&void 0!==r?r:0;return(0,l.jsx)("div",{className:"flex h-full flex-1 flex-col bg-[#f9fbff]",children:(0,l.jsxs)(o.eh,{direction:"horizontal",className:"flex-1 overflow-hidden",children:[(0,l.jsx)(o.s_,{defaultSize:18,minSize:15,maxSize:30,className:"h-full",children:(0,l.jsxs)("div",{className:"flex h-full flex-col border-r border-gray-200 bg-white",children:[(0,l.jsxs)("div",{className:"p-4 border-b border-gray-100",children:[(0,l.jsx)("label",{className:"text-xs font-semibold uppercase tracking-wide text-gray-400 mb-2 block",children:"Search"}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("span",{className:"absolute inset-y-0 left-3 flex items-center text-gray-400",children:(0,l.jsxs)("svg",{className:"h-4 w-4",viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",children:[(0,l.jsx)("path",{d:"m13.5 13.5 3 3",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"}),(0,l.jsx)("circle",{cx:"9",cy:"9",r:"5.5",strokeWidth:"1.6"})]})}),(0,l.jsx)("input",{value:g,onChange:e=>p(e.target.value),placeholder:"Find notebook",className:"w-full rounded-xl border border-gray-200 bg-gray-50 pl-9 pr-3 py-2 text-sm text-gray-700 focus:border-indigo-400 focus:bg-white focus:outline-none"})]}),(0,l.jsx)("button",{onClick:A,className:"mt-4 w-full rounded-xl border border-dashed border-gray-300 py-2 text-sm font-semibold text-gray-700 hover:border-indigo-300 hover:text-indigo-600",children:"+ New Notebook"})]}),(0,l.jsxs)("div",{className:"flex-1 overflow-y-auto",children:[(0,l.jsx)("div",{className:"px-4 py-3 text-xs font-semibold uppercase tracking-wide text-gray-500",children:"Notebooks"}),(0,l.jsxs)("div",{className:"px-2 pb-4 space-y-1",children:[0===C.length&&(0,l.jsx)("div",{className:"text-center text-sm text-gray-500 px-2 py-6",children:"No notebooks found"}),C.map(e=>{let t=(null==d?void 0:d.id)===e.id;return(0,l.jsxs)("button",{onClick:()=>L(e.id),className:"w-full text-left px-3 py-3 rounded-xl border transition-all ".concat(t?"border-indigo-300 bg-indigo-50/70 text-indigo-700":"border-transparent hover:border-gray-200 hover:bg-gray-50"),children:[(0,l.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,l.jsx)("span",{className:"font-semibold text-sm truncate",children:e.name||"Untitled Notebook"}),(0,l.jsx)("span",{className:"text-[10px] uppercase text-gray-400",children:x(e.updatedAt)||"new"})]}),(0,l.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:[e.cells.length," cell",1===e.cells.length?"":"s"]})]},e.id)})]})]})]})}),(0,l.jsx)(o.OT,{className:"group flex w-3 cursor-col-resize items-center justify-center",children:(0,l.jsx)("span",{className:"h-10 w-0.5 rounded-full bg-gray-200 group-hover:bg-indigo-400"})}),(0,l.jsx)(o.s_,{defaultSize:60,minSize:40,className:"h-full",children:(0,l.jsx)("div",{className:"flex h-full flex-col overflow-hidden",children:d?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("header",{className:"border-b border-gray-200 bg-white px-8 py-6 flex items-center justify-between",children:(0,l.jsxs)("div",{className:"min-w-0",children:[(0,l.jsx)("input",{type:"text",value:d.name,onChange:e=>M(d.id,e.target.value),className:"w-full border-none bg-transparent text-2xl font-semibold text-gray-900 focus:outline-none",placeholder:"Notebook name"}),(0,l.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:["Updated ",x(d.updatedAt)||"just now"," \xb7 ",d.cells.length," cell",1===d.cells.length?"":"s"]})]})}),(0,l.jsxs)("div",{className:"flex-1 overflow-y-auto px-8 py-6 space-y-5",children:[d.cells.map((e,t)=>(0,l.jsx)(j,{cell:e,index:t,onSqlChange:t=>R(e.id,t),onExecute:()=>O(e.id),onDelete:()=>_(e.id),canDelete:d.cells.length>1,isActive:e.id===c,onSelect:()=>u(e.id),onToggleCollapse:()=>q(e.id,"collapsed"),onToggleEditor:()=>q(e.id,"hideEditor"),onToggleResult:()=>q(e.id,"hideResult"),onMoveUp:()=>J(e.id,"up"),onMoveDown:()=>J(e.id,"down"),dragState:{isDragging:b===e.id,isDragOver:y===e.id},onDragStart:()=>z(e.id),onDragEnd:T,onDragOver:()=>P(e.id),onDrop:()=>W(e.id)},e.id)),(0,l.jsx)("button",{onClick:F,onDragOver:e=>{e.preventDefault(),b&&k(!0)},onDragLeave:()=>k(!1),onDrop:e=>{e.preventDefault(),I()},className:"w-full rounded-2xl border-2 border-dashed py-4 text-sm font-semibold text-gray-500 transition ".concat(w?"border-indigo-300 text-indigo-600 bg-indigo-50/30":"border-gray-300 hover:border-indigo-300 hover:text-indigo-600"),children:"+ Add Cell"})]})]}):(0,l.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,l.jsxs)("div",{className:"text-center max-w-xs",children:[(0,l.jsx)("p",{className:"text-lg font-semibold text-gray-800 mb-2",children:"No notebooks yet"}),(0,l.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:"Create your first notebook to start experimenting with queries."}),(0,l.jsx)("button",{onClick:A,className:"rounded-xl bg-indigo-600 px-5 py-2 text-sm font-medium text-white hover:bg-indigo-500",children:"Create Notebook"})]})})})}),(0,l.jsx)(o.OT,{className:"group flex w-3 cursor-col-resize items-center justify-center",children:(0,l.jsx)("span",{className:"h-10 w-0.5 rounded-full bg-gray-200 group-hover:bg-indigo-400"})}),(0,l.jsx)(o.s_,{defaultSize:22,minSize:20,maxSize:35,className:"h-full",children:(0,l.jsxs)("div",{className:"flex h-full flex-col border-l border-gray-200 bg-white",children:[(0,l.jsxs)("div",{className:"px-5 py-4 border-b border-gray-100",children:[(0,l.jsx)("p",{className:"text-xs font-semibold uppercase tracking-wide text-gray-500",children:"Result Inspector"}),(0,l.jsxs)("div",{className:"mt-3 flex items-baseline gap-2",children:[(0,l.jsx)("span",{className:"text-2xl font-semibold text-gray-900",children:H}),(0,l.jsxs)("span",{className:"text-sm text-gray-500",children:["Row",1===H?"":"s"]})]}),(0,l.jsxs)("div",{className:"text-sm text-gray-500 mt-1",children:[Q," Column",1===Q?"":"s"]})]}),(0,l.jsxs)("div",{className:"flex-1 overflow-y-auto p-5 space-y-4",children:[!d&&(0,l.jsx)("p",{className:"text-sm text-gray-500",children:"Create a notebook to start running queries."}),d&&!D&&(0,l.jsx)("p",{className:"text-sm text-gray-500",children:"Add a cell to see results."}),d&&D&&(0,l.jsxs)(l.Fragment,{children:[D.loading&&(0,l.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[(0,l.jsx)("span",{className:"w-3 h-3 border-2 border-gray-300 border-t-indigo-500 rounded-full animate-spin"}),"Running query..."]}),D.error&&(0,l.jsx)("div",{className:"rounded-xl border border-red-200 bg-red-50 p-3 text-sm text-red-700",children:D.error}),!D.loading&&!D.error&&S&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"text-xs font-semibold uppercase tracking-wide text-gray-400",children:"Filter rows"}),(0,l.jsxs)("div",{className:"relative mt-2",children:[(0,l.jsx)("span",{className:"absolute inset-y-0 left-3 flex items-center text-gray-400",children:(0,l.jsxs)("svg",{className:"h-4 w-4",viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",children:[(0,l.jsx)("path",{d:"m13.5 13.5 3 3",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"}),(0,l.jsx)("circle",{cx:"9",cy:"9",r:"5.5",strokeWidth:"1.6"})]})}),(0,l.jsx)("input",{value:h,onChange:e=>m(e.target.value),className:"w-full rounded-xl border border-gray-200 bg-gray-50 pl-9 pr-3 py-2 text-sm text-gray-700 focus:border-indigo-400 focus:bg-white focus:outline-none",placeholder:"Search results"})]})]}),(0,l.jsxs)("div",{className:"rounded-2xl border border-gray-200 overflow-hidden",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between px-4 py-2 border-b border-gray-100 text-xs text-gray-500",children:[(0,l.jsx)("span",{children:S.duration||"Result"}),(0,l.jsxs)("span",{children:[E.length," shown"]})]}),(0,l.jsx)("div",{className:"overflow-auto max-h-80",children:(0,l.jsxs)("table",{className:"min-w-full text-sm",children:[(0,l.jsx)("thead",{className:"bg-gray-50",children:(0,l.jsx)("tr",{children:S.columns.map((e,t)=>(0,l.jsxs)("th",{className:"px-3 py-2 text-left font-semibold text-gray-700",children:[(0,l.jsx)("div",{children:e}),S.types[t]&&(0,l.jsx)("div",{className:"text-xs text-gray-400",children:S.types[t]})]},e+t))})}),(0,l.jsx)("tbody",{children:E.map((e,t)=>(0,l.jsx)("tr",{className:t%2==0?"bg-white":"bg-gray-50",children:e.map((e,t)=>(0,l.jsx)("td",{className:"px-3 py-2 text-gray-800 font-mono text-xs",children:e},t))},t))})]})})]}),(0,l.jsxs)("div",{className:"rounded-2xl border border-dashed border-gray-200 p-3",children:[(0,l.jsx)("p",{className:"text-xs font-semibold uppercase tracking-wide text-gray-400 mb-2",children:"Column types"}),(0,l.jsx)("div",{className:"space-y-1",children:S.columns.map((e,t)=>(0,l.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,l.jsx)("span",{className:"text-gray-700",children:e}),(0,l.jsx)("span",{className:"text-gray-500 font-mono text-xs",children:S.types[t]})]},e+t))})]})]}),!D.loading&&!D.error&&!S&&(0,l.jsx)("p",{className:"text-sm text-gray-500",children:"Run the selected cell to preview its data."})]})]})]})})]})})}},5122:function(e,t,r){r.d(t,{MH:function(){return d},tR:function(){return n}});var l=r(1861),s=r(3233),o=r(987);let a={background:"#fff",foreground:"#3D3D3D",selection:"#BBDFFF",selectionMatch:"#BBDFFF",gutterBackground:"#fff",gutterForeground:"#AFAFAF",lineHighlight:"#EDF4FF"},n=function(e){let{theme:t="light",settings:r={},styles:o=[]}={};return(0,s.j)({theme:t,settings:{...a,...r},styles:[{tag:[l.pJ.comment,l.pJ.quote],color:"#707F8D"},{tag:[l.pJ.typeName,l.pJ.typeOperator],color:"#aa0d91"},{tag:[l.pJ.keyword],color:"#aa0d91",fontWeight:"bold"},{tag:[l.pJ.string,l.pJ.meta],color:"#D23423"},{tag:[l.pJ.name],color:"#032f62"},{tag:[l.pJ.typeName],color:"#522BB2"},{tag:[l.pJ.variableName],color:"#23575C"},{tag:[l.pJ.definition(l.pJ.variableName)],color:"#327A9E"},{tag:[l.pJ.regexp,l.pJ.link],color:"#0e0eff"},...o]})}(),d=o.tk.theme({"&":{fontSize:"12pt",border:"1px solid #556cd6","border-radius":"3px",padding:"3px"},"&.cm-editor.cm-focused":{outline:"none","border-width":"2px","border-color":"#fcd004"},".cm-tooltip-autocomplete":{border:"1px solid #556cd6","border-radius":"3px",margin:"3px",padding:"3px",background:"white",color:"black"},".cm-completionMatchedText":{"text-decoration":"none"},".cm-tooltip-autocomplete ul li[aria-selected]":{background:"white",color:"black","font-weight":"bold"}})}}]);